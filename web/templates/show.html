{{define "content"}}
<div class="object-view">
    <div class="object-header">
        <div class="object-meta">
            <span class="object-id">ID: {{.Object.ID | printf "%.8s"}}</span>
            <span class="object-type">Type: {{.Object.Type}}</span>
            <time>Created: {{.Object.Created.Format "Jan 02, 2006 15:04"}}</time>
            <time>Modified: {{.Object.Modified.Format "Jan 02, 2006 15:04"}}</time>
        </div>

        {{if .Object.Meta}}
        <div class="metadata">
            <h3>Metadata</h3>
            <dl>
                {{range $key, $value := .Object.Meta}}
                <dt>{{$key}}</dt>
                <dd>
                    {{if eq (printf "%T" $value) "[]interface {}"}}
                        {{range $value}}{{.}}, {{end}}
                    {{else}}
                        {{$value}}
                    {{end}}
                </dd>
                {{end}}
            </dl>
        </div>
        {{end}}
    </div>

    <div class="object-content">
        <h3>Content</h3>
        {{if eq .Object.Type "note"}}
            <pre class="content-text">{{printf "%s" .Object.Content}}</pre>
        {{else if eq .Object.Type "file"}}
            <div class="file-info">
                <p>File: {{.Object.Meta.filename}}</p>
                <p>Size: {{len .Object.Content}} bytes</p>
            </div>
        {{end}}
    </div>

    <div class="object-links">
        <div class="links-header">
            <h3>Links</h3>
            <a href="/link?source={{.Object.ID}}" class="button">Add Link</a>
        </div>

        {{if .Links}}
        <div class="links-list">
            <h4>Outgoing Links</h4>
            {{range .Links}}
                {{if eq .Source $.Object.ID}}
                <div class="link-item">
                    <span class="link-type">{{.Type}}</span>
                    <span class="link-arrow">→</span>
                    <a href="/show/{{.Target}}" class="link-id">{{.Target | printf "%.8s"}}</a>
                    {{if .Meta.note}}
                    <span class="link-note">{{.Meta.note}}</span>
                    {{end}}
                </div>
                {{end}}
            {{end}}

            <h4>Incoming Links</h4>
            {{range .Links}}
                {{if eq .Target $.Object.ID}}
                <div class="link-item">
                    <a href="/show/{{.Source}}" class="link-id">{{.Source | printf "%.8s"}}</a>
                    <span class="link-arrow">→</span>
                    <span class="link-type">{{.Type}}</span>
                    {{if .Meta.note}}
                    <span class="link-note">{{.Meta.note}}</span>
                    {{end}}
                </div>
                {{end}}
            {{end}}
        </div>
        {{else}}
        <p class="no-links">No links found.</p>
        {{end}}
    </div>
</div>
{{end}}
